/*
 * Name:	Remote
 * Date:	2017-11-18
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * Handles all remote execution. All calls that need to be done across the network must be registered here.
 */

using Intrusion.Client;
using Intrusion.Common;
using Intrusion.Server;

namespace Intrusion.Communication
{
	public class Remote
	{
		public static method Invoke {
			params ["_methodFullName" as String, ["_parameter" as Any, []]];

			[_methodFullName, _parameter] remoteExec ["Intrusion_Communication_Remote_Recieve", RemoteTargetOptions.All];
		};
		
		public static method Recieve {
			params ["_methodFullName" as String, "_parameters" as Any];
        	[(str _this) + " Remote.Recieve"] call LogHandler.Debug;
			
			// If the server is the reciever
			
			if (isServer) then {
				switch (_methodFullName) do {
					case "ResourceLocationHandler.SetNewFlagOwner": { _parameters spawn ResourceLocationHandler.SetNewFlagOwner; };
					case "SquadHandlerReciever.SetSquadProfession": { _parameters spawn SquadHandlerReciever.SetSquadProfession; };
					case "ServerEventReciever.OnPlayerClaimBrigadeLeadership": { _parameters spawn ServerEventReciever.OnPlayerClaimBrigadeLeadership; };
					case "ServerEventReciever.OnPlayerQuitBrigadeLeadership": { _parameters spawn ServerEventReciever.OnPlayerQuitBrigadeLeadership; };
					case "ServerEventReciever.OnLeaderMoveBase": { _parameters spawn ServerEventReciever.OnLeaderMoveBase; };
					case "ServerEventReciever.OnPlayerJoinedGroup": { _parameters spawn ServerEventReciever.OnPlayerJoinedGroup; };
					//case "ServerEventReciever.OnPlayerLeftGroup": { _parameters spawn ServerEventReciever.OnPlayerLeftGroup; };
				};
			};
			
			// If the client is the reciever
			
			if (!isDedicated) then {
				switch (_methodFullName) do {
					case "ClientResourceLocationHandler.UpdateResourceLocations": { _parameters spawn ClientResourceLocationHandler.UpdateResourceLocations; };
					case "ClientSquadHandler.OnGroupProfessionChanged": { _parameters spawn ClientSquadHandler.OnGroupProfessionChanged };
					case "ClientSquadHandler.OnGroupProfessionChangeRejected": { _parameters spawn ClientSquadHandler.OnGroupProfessionChangeRejected };
					case "ClientMessageHandler.ShowHint": { _parameters spawn ClientMessageHandler.ShowHint };
					case "ClientMessageHandler.ShowMessage": { _parameters spawn ClientMessageHandler.ShowMessage };
					case "ClientMessageHandler.ShowSubTitle": { _parameters spawn ClientMessageHandler.ShowSubTitle };
					case "MissionEndHandler.PlayEndScene": { _parameters spawn MissionEndHandler.PlayEndScene };
					case "MapObservationsHandler.UpdateMap": { _parameters spawn MapObservationsHandler.UpdateMap };
					case "ClientVehicleHandler.GroupLockVehicles": { _parameters spawn ClientVehicleHandler.GroupLockVehicles };
					case "ClientEventReciever.OnNewBrigadeLeader": { _parameters spawn ClientEventReciever.OnNewBrigadeLeader };
					case "ClientEventReciever.OnBrigadeLeaderRejected": { _parameters spawn ClientEventReciever.OnBrigadeLeaderRejected };
					case "ClientEventReciever.OnBrigadeLeaderQuit": { _parameters spawn ClientEventReciever.OnBrigadeLeaderQuit };
					case "ClientEventReciever.OnPlayerJoinedGroup": { _parameters spawn ClientEventReciever.OnPlayerJoinedGroup; };
					case "ClientEventReciever.OnPlayerLeftGroup": { _parameters spawn ClientEventReciever.OnPlayerLeftGroup; };
					case "ClientEventReciever.OnJipPlayerConnected": { _parameters spawn ClientEventReciever.OnJipPlayerConnected; };
					case "ClientEventReciever.OnGroupTeleportingToBase": { _parameters spawn ClientEventReciever.OnGroupTeleportingToBase; };
					case "ClientEventReciever.OnPlayerKilled": { _parameters spawn ClientEventReciever.OnPlayerKilled; };
					case "ClientEventReciever.OnPlayerDisconnected": { _parameters spawn ClientEventReciever.OnPlayerDisconnected; };
					case "ClientEventReciever.OnResourceReportCollectionUpdated": { _parameters spawn ClientEventReciever.OnResourceReportCollectionUpdated; };
					case "ClientEventReciever.OnBrigadeLeaderGivingOrder": { _parameters spawn ClientEventReciever.OnBrigadeLeaderGivingOrder; };
					case "ClientEventReciever.OnPlayerRespawn": { _parameters spawn ClientEventReciever.OnPlayerRespawn; };
				};
			};
		};
	};
};
